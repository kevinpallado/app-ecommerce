import{_ as L}from"./CKEQ3BzR.js";import{d as S,C as D,a as V,c as N}from"./DIkI3K7W.js";import{C as v,K as y,o as n,w as i,b as c,a as t,G as e,c as r,L as x,t as l,F as b,D as k,E as U,I as j,r as q,q as F,J as P,d as T}from"./BKman8TT.js";import{u as A,S as J,B as M}from"./D-XgdDLI.js";const z=S("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),E={class:"relative w-full h-64 bg-muted"},I=["src","alt"],K={class:"p-4"},Q={class:"text-lg font-semibold text-foreground truncate"},R={key:0,class:"inline-block text-xs bg-gray-200 rounded-full px-2 py-1 mt-2"},G={class:"flex items-center gap-1 mt-2"},O={class:"flex"},H={class:"text-sm text-muted-foreground ml-1"},X={key:1,class:"text-sm text-muted-foreground mt-2"},W={class:"flex items-end justify-between mt-4"},Y={class:"text-xl font-bold text-foreground"},Z=v({__name:"card",props:{product:{}},setup(s){const d=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return(_,f)=>(n(),y(e(V),{class:"overflow-hidden hover:shadow-lg transition-shadow"},{default:i(()=>[c(e(D),{class:"p-0"},{default:i(()=>[t("div",E,[t("img",{src:s.product.image||"/placeholder.svg",alt:s.product.name,class:"w-full h-full object-cover"},null,8,I)])]),_:1}),t("div",K,[t("h3",Q,l(s.product.name),1),s.product.category?(n(),r("span",R,l(s.product.category),1)):x("",!0),t("div",G,[t("div",O,[(n(),r(b,null,k(5,u=>c(e(z),{key:u,size:16,class:U(u<=Math.floor(s.product.rating)?"fill-yellow-400 text-yellow-400":"text-muted-foreground")},null,8,["class"])),64))]),t("span",H," ("+l(s.product.rating)+") ",1)]),s.product.stock!==void 0?(n(),r("div",X," Stock: "+l(s.product.stock),1)):x("",!0),t("div",W,[t("span",Y,l(e(d).format(s.product.price)),1)])])]),_:1}))}}),tt=Object.assign(Z,{__name:"ProductsCard"}),et={class:"container mx-auto p-6"},st={class:"flex items-center justify-between"},at={key:0,class:"text-center py-10"},ot={key:1,class:"text-red-500 text-center py-10"},nt={class:"mt-2"},rt={key:2},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},mt=v({__name:"index",async setup(s){let d,_;const f=F(),{data:u,pending:w,error:h,refresh:C}=([d,_]=j(()=>A(`${f.public.PRODUCTS_URL}/api/products`,"$DaB8KTHaxh")),d=await d,_(),d),$=q(()=>u.value?.data?u.value.data.map(a=>{const o=a.variants?.reduce((p,m)=>m.price<p.price?m:p,a.variants[0]);return{id:a.id,name:a.name,price:o?.price||0,image:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/smartwatch-lifestyle-MqUJq7o0GQlVqJTAUQ6XsDAekJqaKQ.png",rating:2,description:a.description,stock:a.stock,category:a.category?.name,hasMultipleVariants:a.variants&&a.variants.length>1}}):[]);return(a,o)=>{const p=P("Button"),m=L,B=tt;return n(),r("div",et,[t("div",st,[o[1]||(o[1]=t("h1",{class:"text-3xl font-bold mb-6"},"Products Catalog",-1)),c(m,{to:"/checkout",class:"inline-flex items-center gap-2 mb-6 text-primary hover:underline"},{default:i(()=>[c(p,{variant:"link",class:"relative cursor-pointer"},{default:i(()=>[c(e(J),{class:"h-6 w-6"}),c(e(M),{class:"absolute -top-3 -right-3 h-5 min-w-5 flex items-center justify-center p-1 text-xs",variant:"destructive"},{default:i(()=>[T(l(e(N).length),1)]),_:1})]),_:1})]),_:1})]),e(w)?(n(),r("div",at,[...o[2]||(o[2]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"},null,-1),t("p",{class:"mt-4"},"Loading products...",-1)])])):e(h)?(n(),r("div",ot,[o[3]||(o[3]=t("p",{class:"text-xl font-semibold"},"Error loading products",-1)),t("p",nt,l(e(h).message),1),t("button",{onClick:o[0]||(o[0]=g=>e(C)()),class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Try Again ")])):(n(),r("div",rt,[t("div",ct,[(n(!0),r(b,null,k(e($),g=>(n(),y(m,{key:g.id,to:`/product/${g.id}`,class:"block hover:shadow-lg transition-shadow"},{default:i(()=>[c(B,{product:g},null,8,["product"])]),_:2},1032,["to"]))),128))])]))])}}});export{mt as default};

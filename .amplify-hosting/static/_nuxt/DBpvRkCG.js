import{_ as Y}from"./CKEQ3BzR.js";import{g as I,j as Z,k as A,l as D,p as ee,m as W,n as te,e as U,q as V,r as x,s as R,v as re,x as se,y as oe,c as k,z as ie,o as w,A as N,B as ne,C as H,a as h,b as y,t as _,F as j,D as B,E as L,G as f,w as $,d as C,H as ae,I as ce,J as le,K as de,L as ue}from"./BKman8TT.js";import{B as fe,A as me}from"./CkG47UUf.js";import{C as pe,a as ge,b as he,c as ve}from"./DIkI3K7W.js";import{S as F,u as ye,B as _e}from"./D-XgdDLI.js";async function xe(e,t){return await we(t).catch(r=>(console.error("Failed to get image meta for "+t,r+""),{width:0,height:0,ratio:0}))}async function we(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,s)=>{const r=new Image;r.onload=()=>{const o={width:r.width,height:r.height,ratio:r.width/r.height};t(o)},r.onerror=o=>s(o),r.src=e})}function O(e){return(t=>t!==void 0?e[t]||t:e.missingValue)}function be(e={}){const t=e.formatter,s=e.keyMap&&typeof e.keyMap!="function"?O(e.keyMap):e.keyMap,r={};for(const o in e.valueMap){const n=o,a=e.valueMap[n];r[n]=typeof a=="object"?O(a):a}return o=>{const n=[];for(const a in o){const i=a;if(typeof o[i]>"u")continue;const m=typeof r[i]=="function"?r[i](o[i]):o[i];n.push([s?s(i):i,m])}return t?n.map(a=>t(...a)).join(e.joinWith??"&"):new URLSearchParams(n).toString()}}function ke(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const s of e.split(" ")){const r=Number.parseInt(s.replace("x",""));r&&t.add(r)}return Array.from(t)}function Se(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function q(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function $e(e){const t={};if(typeof e=="string")for(const s of e.split(/[\s,]+/).filter(r=>r)){const r=s.split(":");r.length!==2?t["1px"]=r[0].trim():t[r[0].trim()]=r[1].trim()}else Object.assign(t,e);return t}function qe(e){const t={options:e},s=(o,n={})=>T(t,o,n),r=((o,n,a)=>s(o,I({modifiers:n},a)).url);for(const o in e.presets)r[o]=((n,a,i)=>r(n,a,{...e.presets[o],...i}));return r.options=e,r.getImage=s,r.getMeta=((o,n)=>Me(t,o,n)),r.getSizes=((o,n)=>De(t,o,n)),t.$img=r,r}async function Me(e,t,s){const r=T(e,t,{...s});return typeof r.getMeta=="function"?await r.getMeta():await xe(e,r.url)}function T(e,t,s){if(t&&typeof t!="string")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(!t||t.startsWith("data:"))return{url:t};const{setup:r,defaults:o}=ze(e,s.provider||e.options.provider),n=r(),a=G(e,s.preset);if(t=A(t)?t:Z(t),!n.supportsAlias){for(const d in e.options.alias)if(t.startsWith(d)){const p=e.options.alias[d];p&&(t=D(p,t.slice(d.length)))}}if(n.validateDomains&&A(t)){const d=ee(t).host;if(!e.options.domains.find(p=>p===d))return{url:t}}const i=I(s,a,o),m={...i,modifiers:{...i.modifiers,width:i.modifiers?.width?q(i.modifiers.width):void 0,height:i.modifiers?.height?q(i.modifiers.height):void 0}},l=n.getImage(t,m,e);return l.format||=m.modifiers.format||"",l}function ze(e,t){const s=e.options.providers[t];if(!s)throw new Error("Unknown provider: "+t);return s}function G(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function De(e,t,s){const r=G(e,s.preset),o=I(s,r),n=q(o.modifiers?.width),a=q(o.modifiers?.height),i=o.sizes?$e(o.sizes):{},m=o.densities?.trim(),l=m?ke(m):e.options.densities;Se(l);const d=n&&a?a/n:0,p=[],v=[];if(Object.keys(i).length>=1){for(const u in i){const c=P(u,String(i[u]),a,d,e);if(c!==void 0){p.push({size:c.size,screenMaxWidth:c.screenMaxWidth,media:`(max-width: ${c.screenMaxWidth}px)`});for(const g of l)v.push({width:c._cWidth*g,src:E(e,t,s,c,g)})}}Ce(p)}else for(const u of l){const c=Object.keys(i)[0];let g=c?P(c,String(i[c]),a,d,e):void 0;g===void 0&&(g={size:"",screenMaxWidth:0,_cWidth:s.modifiers?.width,_cHeight:s.modifiers?.height}),v.push({width:u,src:E(e,t,s,g,u)})}Ie(v);const S=v[v.length-1],b=p.length?p.map(u=>`${u.media?u.media+" ":""}${u.size}`).join(", "):void 0,M=b?"w":"x",z=v.map(u=>`${u.src} ${u.width}${M}`).join(", ");return{sizes:b,srcset:z,src:S?.src}}function P(e,t,s,r,o){const n=o.options.screens&&o.options.screens[e]||Number.parseInt(e),a=t.endsWith("vw");if(!a&&/^\d+$/.test(t)&&(t=t+"px"),!a&&!t.endsWith("px"))return;let i=Number.parseInt(t);if(!n||!i)return;a&&(i=Math.round(i/100*n));const m=r?Math.round(i*r):s;return{size:t,screenMaxWidth:n,_cWidth:i,_cHeight:m}}function E(e,t,s,r,o){return e.$img(t,{...s.modifiers,width:r._cWidth?r._cWidth*o:void 0,height:r._cHeight?r._cHeight*o:void 0},s)}function Ce(e){e.sort((s,r)=>s.screenMaxWidth-r.screenMaxWidth);let t=null;for(let s=e.length-1;s>=0;s--){const r=e[s];r.media===t&&e.splice(s,1),t=r.media}for(let s=0;s<e.length;s++)e[s].media=e[s+1]?.media||""}function Ie(e){e.sort((s,r)=>s.width-r.width);let t=null;for(let s=e.length-1;s>=0;s--){const r=e[s];r.width===t&&e.splice(s,1),t=r.width}}function Ae(e){let t;return()=>t||(t=typeof e=="function"?e():e,t)}const We=be({keyMap:{format:"f",width:"w",height:"h",resize:"s",quality:"q",background:"b",position:"pos"},formatter:(e,t)=>W(e)+"_"+W(t.toString())}),Ne=Ae({validateDomains:!0,supportsAlias:!0,getImage:(e,{modifiers:t,baseURL:s},r)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const o=We(t)||"_";return s||(s=D(r.options.nuxt.baseURL,"/_ipx")),{url:D(s,o,te(e))}}}),je={screens:{sm:640,md:768,lg:1024,xl:1280,"2xl":1536},presets:{},provider:"ipx",domains:[],alias:{},densities:[1,2],format:["webp"],provider:"ipx",providers:{ipx:{setup:Ne,defaults:{}}}},J=e=>{const t=V(),s=U();return s.$img||s._img||(s._img=qe({...je,event:s.ssrContext?.event,nuxt:{baseURL:t.app.baseURL},runtimeConfig:t}))};function Be(e){performance?.mark?.("mark_feature_usage",{detail:{feature:e}})}const Le=e=>{const t=J(),s=x(()=>({provider:e.provider,preset:e.preset})),r=x(()=>({width:q(e.width),height:q(e.height),crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,nonce:e.nonce})),o=x(()=>({...e.modifiers,width:e.width,height:e.height,format:e.format,quality:e.quality||t.options.quality,background:e.background,fit:e.fit}));return{providerOptions:s,normalizedAttrs:r,imageModifiers:o}},Oe=["src"],Pe={__name:"NuxtImg",props:{custom:{type:Boolean,required:!1},placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[String,Number],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:null,required:!1},sizes:{type:[String,Object],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},crossorigin:{type:[String,Boolean],required:!1},nonce:{type:String,required:!1}},emits:["load","error"],setup(e,{expose:t,emit:s}){const r=e,o=s,n=J(),{providerOptions:a,normalizedAttrs:i,imageModifiers:m}=Le(r),l=x(()=>n.getSizes(r.src,{...a.value,sizes:r.sizes,densities:r.densities,modifiers:m.value})),d=R(!1),p=re(),v=x(()=>({...i.value,"data-nuxt-img":"",...!r.placeholder||d.value?{sizes:l.value.sizes,srcset:l.value.srcset}:{},...p})),S=x(()=>{if(d.value)return!1;const c=r.placeholder===""?[10,10]:r.placeholder;if(!c)return!1;if(typeof c=="string")return c;const[g=10,Q=g,K=50,X=3]=Array.isArray(c)?c:typeof c=="number"?[c]:[];return n(r.src,{...m.value,width:g,height:Q,quality:K,blur:X},a.value)}),b=x(()=>r.sizes?l.value.src:n(r.src,m.value,a.value)),M=x(()=>S.value||b.value),z=U().isHydrating,u=se("imgEl");return t({imgEl:u}),oe(()=>{if(S.value||r.custom){const c=new Image;b.value&&(c.src=b.value),r.sizes&&(c.sizes=l.value.sizes||"",c.srcset=l.value.srcset),c.decode?c.decode().then(()=>{d.value=!0,o("load",new Event("load"))}).catch(g=>{o("error",g)}):(c.onload=g=>{d.value=!0,o("load",g)},c.onerror=g=>{o("error",g)}),Be("nuxt-image");return}u.value&&(u.value.complete&&z&&(u.value.getAttribute("data-error")?o("error",new Event("error")):o("load",new Event("load"))),u.value.onload=c=>{o("load",c)},u.value.onerror=c=>{o("error",c)})}),(c,g)=>e.custom?ie(c.$slots,"default",ne(N({key:1},{imgAttrs:v.value,isLoaded:d.value,src:M.value}))):(w(),k("img",N({key:0,ref_key:"imgEl",ref:u,class:S.value?e.placeholderClass:void 0},v.value,{src:M.value}),null,16,Oe))}},Ee=Object.assign(Pe,{__name:"NuxtImg"}),Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Ve={class:"bg-muted rounded-lg overflow-hidden h-96 md:h-full"},Re={class:"flex flex-col gap-3"},He={class:"text-4xl font-bold text-foreground mb-4"},Fe={class:"flex items-center gap-2 mb-2"},Te={class:"flex gap-1"},Ge={class:"text-lg text-muted-foreground"},Je={class:"text-lg text-muted-foreground"},Qe={class:"text-5xl font-bold text-foreground"},Ke={class:"text-lg text-muted-foreground"},Xe={class:"space-y-4"},Ye={class:"flex flex-wrap gap-2"},Ze=["onClick"],et=H({__name:"details",props:{productDetails:{}},setup(e){const t=e,s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});let r=R(t.productDetails.variants[0]);const o=a=>{r.value=a},n=()=>{he({qty:1,product_name:t.productDetails.name,product_variant:r.value.name,sku:r.value.sku,variant_id:r.value.id,variant_name:r.value.name,product_id:r.value.products_id,price:r.value.price})};return(a,i)=>{const m=Ee;return w(),k("div",Ue,[h("div",Ve,[y(m,{src:e.productDetails.image||"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/smartwatch-lifestyle-MqUJq7o0GQlVqJTAUQ6XsDAekJqaKQ.png",alt:e.productDetails.name,class:"w-full h-full object-cover"},null,8,["src","alt"])]),h("div",Re,[h("h1",He,_(e.productDetails.name),1),h("div",Fe,[h("div",Te,[(w(),k(j,null,B(5,l=>h("span",{key:l,class:L(["inline-block",l<=Math.floor(e.productDetails.rating||0)?"text-yellow-400":"text-muted-foreground"])}," â˜… ",2)),64))]),h("span",Ge," ("+_(e.productDetails.rating)+") ",1)]),h("span",Je," Stock "+_(f(r).stock)+" | "+_(f(r).sku),1),h("p",Qe,_(f(s).format(f(r).price)),1),h("p",Ke,_(e.productDetails.description),1),y(f(ge),null,{default:$(()=>[y(f(pe),{class:"p-6"},{default:$(()=>[i[2]||(i[2]=h("h3",{class:"font-semibold text-foreground mb-4"},"Select Options",-1)),h("div",Xe,[i[1]||(i[1]=h("label",{class:"text-sm font-medium text-foreground capitalize mb-2 block"}," Size ",-1)),h("div",Ye,[(w(!0),k(j,null,B(e.productDetails.variants,l=>(w(),k("button",{onClick:d=>o(l),class:L(["px-4 py-2 rounded-lg border-2 transition-colors",f(r).id===l.id?"border-primary bg-primary text-primary-foreground":"border-border text-foreground hover:border-primary"])},_(l.name),11,Ze))),256))])])]),_:1})]),_:1}),y(f(fe),{class:"w-full gap-2 py-6 text-lg",onClick:i[0]||(i[0]=l=>n())},{default:$(()=>[y(f(F),{class:"h4-w4"}),i[3]||(i[3]=C(" Add to Cart ",-1))]),_:1})])])}}}),tt=Object.assign(et,{__name:"ProductsDetails"}),rt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},st={class:"flex justify-between items-center"},ot={key:0,class:"text-center py-12"},it={key:1,class:"text-center py-12 text-red-500"},ut=H({__name:"[id]",async setup(e){let t,s;const r=ae(),o=V(),{data:n,pending:a,error:i,refresh:m}=([t,s]=ce(()=>ye(`${o.public.PRODUCTS_URL}/api/products/${r.params.id}`,"$7hFHIZnEVr")),t=await t,s(),t),l=x(()=>{const d=n.value?.data;if(!d)return null;const p=d.variants?.map(v=>({...v}))||[];return{...d,rating:5,variants:p}});return(d,p)=>{const v=Y,S=le("Button"),b=tt;return w(),k("div",rt,[h("div",st,[y(v,{to:"/products",class:"inline-flex items-center gap-2 mb-6 text-primary hover:underline"},{default:$(()=>[y(f(me),{class:"h-4 w-4"}),p[0]||(p[0]=C(" Back to Products ",-1))]),_:1}),y(v,{to:"/checkout",class:"inline-flex items-center gap-2 mb-6 text-primary hover:underline"},{default:$(()=>[y(S,{variant:"link",class:"relative cursor-pointer"},{default:$(()=>[y(f(F),{class:"h-6 w-6"}),y(f(_e),{class:"absolute -top-3 -right-3 h-5 min-w-5 flex items-center justify-center p-1 text-xs",variant:"destructive"},{default:$(()=>[C(_(f(ve).length),1)]),_:1})]),_:1})]),_:1})]),f(a)?(w(),k("div",ot,"Loading...")):f(i)?(w(),k("div",it," Error loading product: "+_(f(i).message),1)):f(l)?(w(),de(b,{key:2,productDetails:f(l)},null,8,["productDetails"])):ue("",!0)])}}});export{ut as default};

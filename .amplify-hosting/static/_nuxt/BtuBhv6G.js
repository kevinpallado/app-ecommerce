import{_ as j}from"./CKEQ3BzR.js";import{C,K as w,o as u,w as g,b as m,a as e,M as c,N as p,G as a,r as k,t as i,c as f,D as O,F as P,L as D,_ as T,s as h,d as F,q as I}from"./BKman8TT.js";import{d as M,C as $,a as S,e as q,c as _}from"./DIkI3K7W.js";import{B as V,A as B}from"./CkG47UUf.js";const L=M("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),E={class:"pt-0 space-y-4"},z={class:"grid grid-cols-2 gap-4"},Y={class:"grid grid-cols-3 gap-4"},A=C({__name:"form",props:{formData:{}},setup(y){const o=y;return(l,t)=>(u(),w(a(S),null,{default:g(()=>[m(a($),null,{default:g(()=>[t[14]||(t[14]=e("div",{class:"pb-4"},[e("h3",{class:"text-2xl font-semibold leading-none tracking-tight"}," Shipping Information ")],-1)),e("div",E,[e("div",z,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"First Name",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.formData.firstName=r),type:"text",placeholder:"John",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.firstName]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"Last Name",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.formData.lastName=r),type:"text",placeholder:"Doe",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.lastName]])])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"Email",-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.formData.email=r),type:"email",placeholder:"john@example.com",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.email]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"Address",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>o.formData.address=r),type:"text",placeholder:"123 Main St",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.address]])]),e("div",Y,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"City",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.formData.city=r),type:"text",placeholder:"New York",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.city]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"State",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>o.formData.state=r),type:"text",placeholder:"NY",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.state]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"ZIP Code",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>o.formData.zipCode=r),type:"text",placeholder:"10001",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.zipCode]])])])])]),_:1})]),_:1}))}}),H=Object.assign(A,{__name:"CheckoutForm"}),R={class:"pt-0 space-y-4"},J={class:"grid grid-cols-2 gap-4"},K=C({__name:"payment",props:{formData:{}},setup(y){const o=y;return(l,t)=>(u(),w(a(S),null,{default:g(()=>[m(a($),null,{default:g(()=>[t[6]||(t[6]=e("div",{class:"pb-4"},[e("h3",{class:"text-2xl font-semibold leading-none tracking-tight"}," Payment Information ")],-1)),e("div",R,[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"Card Number",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.formData.cardNumber=r),type:"text",placeholder:"1234 5678 9012 3456",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.cardNumber]])]),e("div",J,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"Expiry Date",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.formData.expiryDate=r),type:"text",placeholder:"MM/YY",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.expiryDate]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"CVC",-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.formData.cvc=r),type:"text",placeholder:"123",class:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[p,o.formData.cvc]])])])])]),_:1})]),_:1}))}}),G=Object.assign(K,{__name:"CheckoutPayment"}),Q={class:"pt-0 space-y-6"},Z={class:"space-y-4 border-b border-border pb-4"},W={class:"font-semibold text-sm text-muted-foreground"},X={class:"space-y-3 max-h-64 overflow-y-auto"},ee={class:"flex-1 min-w-0"},te={class:"text-sm font-medium text-foreground truncate"},oe={class:"text-xs text-muted-foreground"},re={class:"text-xs text-muted-foreground mt-1"},se={class:"text-xs text-muted-foreground mt-1"},ae={class:"text-right flex-shrink-0"},ne={class:"text-sm font-semibold text-foreground"},le={class:"space-y-3 border-b border-border pb-4"},de={class:"flex justify-between text-sm"},ue={class:"text-foreground font-semibold"},ie={class:"flex justify-between text-sm"},me={class:"text-foreground font-semibold"},ce={key:0,class:"text-green-600"},pe={key:1},fe={key:0,class:"text-xs text-green-600"},ge={class:"flex justify-between text-sm"},be={class:"text-foreground font-semibold"},xe={class:"flex justify-between items-center pt-2"},ye={class:"text-3xl font-bold text-foreground"},_e=C({__name:"summary",props:{cart:{},length:{}},setup(y){const o=y,l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),t=k(()=>o.cart.reduce((x,s)=>x+s.price*s.qty,0)),r=k(()=>t.value>100?0:10),b=k(()=>t.value*.087),N=k(()=>t.value+r.value+b.value);return(x,s)=>(u(),w(a(S),null,{default:g(()=>[m(a($),null,{default:g(()=>[m(a(q),null,{default:g(()=>[...s[0]||(s[0]=[e("h3",{class:"text-2xl font-semibold leading-none tracking-tight"}," Order Summary ",-1)])]),_:1}),e("div",Q,[e("div",Z,[e("h3",W," Items ("+i(y.length)+") ",1),e("div",X,[(u(!0),f(P,null,O(y.cart,n=>(u(),f("div",{key:`${n.id}-${n.variant}`,class:"flex gap-3 py-2 border-b border-border/50 last:border-b-0"},[e("div",ee,[e("p",te,i(n.product_name),1),e("p",oe,i(n.product_variant)+" | "+i(n.sku),1),e("p",re," Qty: "+i(n.qty),1),e("p",se,i(a(l).format(n.price)),1)]),e("div",ae,[e("p",ne,i(a(l).format(n.price*n.qty)),1),m(a(V),null,{default:g(()=>[m(a(L),{class:"h-4 w-4"})]),_:1})])]))),128))])]),e("div",le,[e("div",de,[s[1]||(s[1]=e("span",{class:"text-muted-foreground"},"Subtotal",-1)),e("span",ue,i(a(l).format(t.value)),1)]),e("div",ie,[s[2]||(s[2]=e("span",{class:"text-muted-foreground"},"Shipping",-1)),e("span",me,[r.value===0?(u(),f("span",ce,"FREE")):(u(),f("span",pe,i(a(l).format(r.value)),1))])]),r.value===0?(u(),f("p",fe," Free shipping on orders over $100! ")):D("",!0),e("div",ge,[s[3]||(s[3]=e("span",{class:"text-muted-foreground"},"Tax",-1)),e("span",be,i(a(l).format(b.value)),1)])]),e("div",xe,[s[4]||(s[4]=e("span",{class:"text-foreground font-semibold"},"Total",-1)),e("span",ye,i(a(l).format(N.value)),1)])])]),_:1})]),_:1}))}}),ve=Object.assign(_e,{__name:"CheckoutSummary"}),he={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},ke={key:0,class:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-md"},De={key:1,class:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-md"},we={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ne={class:"lg:col-span-2 space-y-6"},Ce={key:0},$e={key:1},Se={__name:"index",setup(y){const o=h({firstName:"",lastName:"",email:"",address:"",city:"",state:"",zipCode:"",phoneNumber:"",cardNumber:"",expiryDate:"",cvc:""}),l=h(!1),t=h(!1),r=h(null),b=h(""),N=async()=>{t.value=!1,b.value="",l.value=!0;try{if(!o.value.firstName||!o.value.lastName||!o.value.email){b.value="Please fill in all required fields",l.value=!1;return}if(_.length===0){b.value="Your cart is empty",l.value=!1;return}const x={user_id:1,name:`${o.value.firstName} ${o.value.lastName}`,email:o.value.email,phone_number:o.value.phoneNumber||"",street_address:o.value.address,city:o.value.city,state_province:o.value.state,postal:o.value.zipCode,cart:_.map(d=>({qty:d.qty||d.quantity||1,sku:d.sku||"",product_id:d.product_id||d.id,variant_name:d.variant_name||"",variant_id:d.variant_id||null,product_name:d.product_name||d.name,price:d.price}))};console.log("Submitting order:",x);const s=I(),n=await fetch(`${s.public.PUBLIC_CHECKOUT_URL}/api/shopping`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!n.ok){const d=await n.json().catch(()=>({}));throw new Error(d.message||`HTTP error! status: ${n.status}`)}const v=await n.json();console.log("Order response:",v),t.value=!0,r.value=v.order_id||v.id||"N/A",setTimeout(()=>{o.value={firstName:"",lastName:"",email:"",address:"",city:"",state:"",zipCode:"",phoneNumber:"",cardNumber:"",expiryDate:"",cvc:""},typeof _.splice=="function"&&_.splice(0,_.length)},2e3)}catch(x){console.error("Order submission error:",x),b.value=x.message||"Failed to place order. Please try again."}finally{l.value=!1}};return(x,s)=>{const n=j,v=H,d=G,U=ve;return u(),f("div",he,[m(n,{to:"/products",class:"inline-flex items-center gap-2 mb-6 text-primary hover:underline"},{default:g(()=>[m(a(B),{class:"h-4 w-4"}),s[0]||(s[0]=F(" Back to Products ",-1))]),_:1}),s[1]||(s[1]=e("h1",{class:"text-4xl font-bold text-foreground mb-8"},"Checkout",-1)),t.value?(u(),f("div",ke," Order placed successfully! Order ID: "+i(r.value),1)):D("",!0),b.value?(u(),f("div",De,i(b.value),1)):D("",!0),e("div",we,[e("div",Ne,[m(v,{formData:o.value},null,8,["formData"]),m(d,{formData:o.value},null,8,["formData"]),m(a(V),{onClick:N,disabled:l.value,class:"w-full py-6 text-lg gap-2 inline-flex items-center justify-center rounded-md bg-primary text-primary-foreground hover:bg-primary/90 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},{default:g(()=>[l.value?(u(),f("span",Ce,"Processing...")):(u(),f("span",$e,"Place Order"))]),_:1},8,["disabled"])]),a(_).length>0?(u(),w(U,{key:0,cart:a(_),length:a(_).length},null,8,["cart","length"])):D("",!0)])])}}},Pe=T(Se,[["__scopeId","data-v-977ec7cf"]]);export{Pe as default};
